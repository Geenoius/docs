<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Truth, Equality and JavaScript | Geeno&#39;s Docs</title>
    <meta name="generator" content="VuePress 1.5.0">
    <link rel="icon" href="/docs/img/apple-touch-icon-152x152.png">
    <link rel="manifest" href="/docs/manifest.json">
    <link rel="apple-touch-icon" href="/docs/icons/apple-touch-icon-152x152.png">
    <link rel="mask-icon" href="/docs/icons/safari-pinned-tab.svg" color="#3eaf7c">
    <meta name="description" content="">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileImage" content="/icons/msapplication-icon-144x144.png">
    <meta name="msapplication-TileColor" content="#000000">
    <link rel="preload" href="/docs/assets/css/0.styles.684dd12f.css" as="style"><link rel="preload" href="/docs/assets/js/app.e2bd7cff.js" as="script"><link rel="preload" href="/docs/assets/js/2.e252a344.js" as="script"><link rel="preload" href="/docs/assets/js/32.4466c93b.js" as="script"><link rel="preload" href="/docs/assets/js/3.cd7f7020.js" as="script"><link rel="prefetch" href="/docs/assets/js/10.ab46e7c8.js"><link rel="prefetch" href="/docs/assets/js/11.bdd1bcbb.js"><link rel="prefetch" href="/docs/assets/js/12.7b4de923.js"><link rel="prefetch" href="/docs/assets/js/13.37bccccc.js"><link rel="prefetch" href="/docs/assets/js/14.ccde06f7.js"><link rel="prefetch" href="/docs/assets/js/15.b23050ba.js"><link rel="prefetch" href="/docs/assets/js/16.4d12f0d2.js"><link rel="prefetch" href="/docs/assets/js/17.861e12b5.js"><link rel="prefetch" href="/docs/assets/js/18.f0faa1d7.js"><link rel="prefetch" href="/docs/assets/js/19.0834b430.js"><link rel="prefetch" href="/docs/assets/js/20.72656569.js"><link rel="prefetch" href="/docs/assets/js/21.8ca58c04.js"><link rel="prefetch" href="/docs/assets/js/22.234b0a3f.js"><link rel="prefetch" href="/docs/assets/js/23.66c53c46.js"><link rel="prefetch" href="/docs/assets/js/24.5d15bf02.js"><link rel="prefetch" href="/docs/assets/js/25.d5fdf813.js"><link rel="prefetch" href="/docs/assets/js/26.d33c7f1e.js"><link rel="prefetch" href="/docs/assets/js/27.1a1589e4.js"><link rel="prefetch" href="/docs/assets/js/28.786bd896.js"><link rel="prefetch" href="/docs/assets/js/29.bd546282.js"><link rel="prefetch" href="/docs/assets/js/30.c5eb2db5.js"><link rel="prefetch" href="/docs/assets/js/31.7205f0f5.js"><link rel="prefetch" href="/docs/assets/js/33.b47c7c80.js"><link rel="prefetch" href="/docs/assets/js/34.7bbdcb5f.js"><link rel="prefetch" href="/docs/assets/js/35.0028dd26.js"><link rel="prefetch" href="/docs/assets/js/36.7d36e51d.js"><link rel="prefetch" href="/docs/assets/js/37.3f983ca7.js"><link rel="prefetch" href="/docs/assets/js/38.04299ecf.js"><link rel="prefetch" href="/docs/assets/js/39.46bf1693.js"><link rel="prefetch" href="/docs/assets/js/4.c46d92ce.js"><link rel="prefetch" href="/docs/assets/js/40.2dfce58d.js"><link rel="prefetch" href="/docs/assets/js/41.567bc6b7.js"><link rel="prefetch" href="/docs/assets/js/42.2221e8d4.js"><link rel="prefetch" href="/docs/assets/js/43.3a5fa5d7.js"><link rel="prefetch" href="/docs/assets/js/44.25c83621.js"><link rel="prefetch" href="/docs/assets/js/45.8f7fe9e5.js"><link rel="prefetch" href="/docs/assets/js/46.6117f0ab.js"><link rel="prefetch" href="/docs/assets/js/47.4ed69f2e.js"><link rel="prefetch" href="/docs/assets/js/48.4aa7ddad.js"><link rel="prefetch" href="/docs/assets/js/49.81f15faf.js"><link rel="prefetch" href="/docs/assets/js/5.38b3e286.js"><link rel="prefetch" href="/docs/assets/js/50.1b516ac1.js"><link rel="prefetch" href="/docs/assets/js/51.dd6e884f.js"><link rel="prefetch" href="/docs/assets/js/52.06ecf575.js"><link rel="prefetch" href="/docs/assets/js/53.18160f00.js"><link rel="prefetch" href="/docs/assets/js/54.53e6959c.js"><link rel="prefetch" href="/docs/assets/js/55.6d177f20.js"><link rel="prefetch" href="/docs/assets/js/56.16099169.js"><link rel="prefetch" href="/docs/assets/js/57.767a8adc.js"><link rel="prefetch" href="/docs/assets/js/58.61f61563.js"><link rel="prefetch" href="/docs/assets/js/59.80bd23aa.js"><link rel="prefetch" href="/docs/assets/js/6.a8391b77.js"><link rel="prefetch" href="/docs/assets/js/60.a6ba1e81.js"><link rel="prefetch" href="/docs/assets/js/61.8cbb2e0f.js"><link rel="prefetch" href="/docs/assets/js/62.27ad5fd9.js"><link rel="prefetch" href="/docs/assets/js/7.a7879395.js"><link rel="prefetch" href="/docs/assets/js/8.ce81400e.js"><link rel="prefetch" href="/docs/assets/js/9.428519ae.js">
    <link rel="stylesheet" href="/docs/assets/css/0.styles.684dd12f.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/docs/" class="home-link router-link-active"><!----> <span class="site-name">Geeno's Docs</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/docs/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/docs/guide/" class="nav-link">
  Guide
</a></div><div class="nav-item"><a href="/docs/software/" class="nav-link">
  Software
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="FrontEnd" class="dropdown-title"><span class="title">FrontEnd</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          Common
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/docs/frontend/common/html/" class="nav-link">
  Html
</a></li><li class="dropdown-subitem"><a href="/docs/frontend/common/css/" class="nav-link">
  Css
</a></li><li class="dropdown-subitem"><a href="/docs/frontend/common/javascript/" class="nav-link router-link-active">
  Javascript
</a></li><li class="dropdown-subitem"><a href="/docs/frontend/common/vue/" class="nav-link">
  Vue
</a></li><li class="dropdown-subitem"><a href="/docs/frontend/common/skill/" class="nav-link">
  Skill
</a></li></ul></li><li class="dropdown-item"><h4>
          Extra
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/docs/frontend/extra/langSpec/" class="nav-link">
  LangSpec
</a></li><li class="dropdown-subitem"><a href="/docs/frontend/extra/framework/" class="nav-link">
  Framework
</a></li><li class="dropdown-subitem"><a href="/docs/frontend/extra/plugins/" class="nav-link">
  Plugins
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Bakend" class="dropdown-title"><span class="title">Bakend</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          Develop
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/docs/bakend/develop/aspnetcore/" class="nav-link">
  AspNetCore
</a></li><li class="dropdown-subitem"><a href="/docs/bakend/develop/csharpspec/" class="nav-link">
  CsharSpec
</a></li><li class="dropdown-subitem"><a href="/docs/bakend/develop/design/" class="nav-link">
  Design
</a></li><li class="dropdown-subitem"><a href="/docs/bakend/develop/linq/" class="nav-link">
  Linq
</a></li></ul></li><li class="dropdown-item"><h4>
          Database
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/docs/bakend/database/mysql/" class="nav-link">
  Mysql
</a></li><li class="dropdown-subitem"><a href="/docs/bakend/database/sqlite/" class="nav-link">
  Sqlite
</a></li><li class="dropdown-subitem"><a href="/docs/bakend/database/sqlserver/" class="nav-link">
  Sqlserver
</a></li></ul></li><li class="dropdown-item"><h4>
          Nuget
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/docs/bakend/nuget/common/" class="nav-link">
  Common
</a></li><li class="dropdown-subitem"><a href="/docs/bakend/nuget/fullspec/" class="nav-link">
  FullSpec
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Windows" class="dropdown-title"><span class="title">Windows</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          Common
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/docs/windows/common/windows-usage/" class="nav-link">
  Usage
</a></li><li class="dropdown-subitem"><a href="/docs/windows/common/regedit/" class="nav-link">
  Regedit
</a></li><li class="dropdown-subitem"><a href="/docs/windows/common/systemperformance/cdisk/" class="nav-link">
  SystemPerformance
</a></li></ul></li><li class="dropdown-item"><h4>
          Tools
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/docs/windows/tools/wordEdit/" class="nav-link">
  WordEdit
</a></li></ul></li><li class="dropdown-item"><h4>
          CommandLine
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/docs/windows/commandline/bash/" class="nav-link">
  Bash
</a></li><li class="dropdown-subitem"><a href="/docs/windows/commandline/dos/" class="nav-link">
  Dos
</a></li><li class="dropdown-subitem"><a href="/docs/windows/commandline/powershell/" class="nav-link">
  PowerShell
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Version" class="dropdown-title"><span class="title">Version</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/version/common/" class="nav-link">
  Common
</a></li><li class="dropdown-item"><!----> <a href="/docs/version/git/" class="nav-link">
  Git
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/docs/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/docs/guide/" class="nav-link">
  Guide
</a></div><div class="nav-item"><a href="/docs/software/" class="nav-link">
  Software
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="FrontEnd" class="dropdown-title"><span class="title">FrontEnd</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          Common
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/docs/frontend/common/html/" class="nav-link">
  Html
</a></li><li class="dropdown-subitem"><a href="/docs/frontend/common/css/" class="nav-link">
  Css
</a></li><li class="dropdown-subitem"><a href="/docs/frontend/common/javascript/" class="nav-link router-link-active">
  Javascript
</a></li><li class="dropdown-subitem"><a href="/docs/frontend/common/vue/" class="nav-link">
  Vue
</a></li><li class="dropdown-subitem"><a href="/docs/frontend/common/skill/" class="nav-link">
  Skill
</a></li></ul></li><li class="dropdown-item"><h4>
          Extra
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/docs/frontend/extra/langSpec/" class="nav-link">
  LangSpec
</a></li><li class="dropdown-subitem"><a href="/docs/frontend/extra/framework/" class="nav-link">
  Framework
</a></li><li class="dropdown-subitem"><a href="/docs/frontend/extra/plugins/" class="nav-link">
  Plugins
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Bakend" class="dropdown-title"><span class="title">Bakend</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          Develop
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/docs/bakend/develop/aspnetcore/" class="nav-link">
  AspNetCore
</a></li><li class="dropdown-subitem"><a href="/docs/bakend/develop/csharpspec/" class="nav-link">
  CsharSpec
</a></li><li class="dropdown-subitem"><a href="/docs/bakend/develop/design/" class="nav-link">
  Design
</a></li><li class="dropdown-subitem"><a href="/docs/bakend/develop/linq/" class="nav-link">
  Linq
</a></li></ul></li><li class="dropdown-item"><h4>
          Database
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/docs/bakend/database/mysql/" class="nav-link">
  Mysql
</a></li><li class="dropdown-subitem"><a href="/docs/bakend/database/sqlite/" class="nav-link">
  Sqlite
</a></li><li class="dropdown-subitem"><a href="/docs/bakend/database/sqlserver/" class="nav-link">
  Sqlserver
</a></li></ul></li><li class="dropdown-item"><h4>
          Nuget
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/docs/bakend/nuget/common/" class="nav-link">
  Common
</a></li><li class="dropdown-subitem"><a href="/docs/bakend/nuget/fullspec/" class="nav-link">
  FullSpec
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Windows" class="dropdown-title"><span class="title">Windows</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          Common
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/docs/windows/common/windows-usage/" class="nav-link">
  Usage
</a></li><li class="dropdown-subitem"><a href="/docs/windows/common/regedit/" class="nav-link">
  Regedit
</a></li><li class="dropdown-subitem"><a href="/docs/windows/common/systemperformance/cdisk/" class="nav-link">
  SystemPerformance
</a></li></ul></li><li class="dropdown-item"><h4>
          Tools
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/docs/windows/tools/wordEdit/" class="nav-link">
  WordEdit
</a></li></ul></li><li class="dropdown-item"><h4>
          CommandLine
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/docs/windows/commandline/bash/" class="nav-link">
  Bash
</a></li><li class="dropdown-subitem"><a href="/docs/windows/commandline/dos/" class="nav-link">
  Dos
</a></li><li class="dropdown-subitem"><a href="/docs/windows/commandline/powershell/" class="nav-link">
  PowerShell
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Version" class="dropdown-title"><span class="title">Version</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/version/common/" class="nav-link">
  Common
</a></li><li class="dropdown-item"><!----> <a href="/docs/version/git/" class="nav-link">
  Git
</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>javascript</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs/frontend/common/javascript/" class="sidebar-link">javascript</a></li><li><a href="/docs/frontend/common/javascript/airbinSpec.html" class="sidebar-link">爱彼迎编码规范</a></li><li><a href="/docs/frontend/common/javascript/string.html" class="sidebar-link">string</a></li><li><a href="/docs/frontend/common/javascript/truethy.html" class="active sidebar-link">Truth, Equality and JavaScript</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/frontend/common/javascript/truethy.html#object-with-tostring" class="sidebar-link">object with toString</a></li><li class="sidebar-sub-header"><a href="/docs/frontend/common/javascript/truethy.html#the-strict-equals-operator" class="sidebar-link">The Strict Equals Operator (===)</a></li><li class="sidebar-sub-header"><a href="/docs/frontend/common/javascript/truethy.html#common-examples-of-equality-overkill" class="sidebar-link">Common Examples of Equality Overkill</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="truth-equality-and-javascript"><a href="#truth-equality-and-javascript" class="header-anchor">#</a> Truth, Equality and JavaScript</h1> <p>You don’t have to be a JavaScript novice to get confused by this…</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token comment">//false</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token operator">!</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">//true</span>
<span class="token punctuation">}</span>
</code></pre></div><p>or this…</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token string">'potato'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'potato'</span> <span class="token operator">==</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token comment">//false</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'potato'</span> <span class="token operator">==</span> <span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token comment">//false</span>
<span class="token punctuation">}</span>
</code></pre></div><p>The good news is that there is a standard and all browsers follow it. Some authors will tell you to fear coercion and and code against it. I hope to persuade you that coercion is a feature to be leveraged (or at the very least understood), not avoided…</p> <p>Is x true? Does x equal y? Questions of truth and equality at the kernel of three major areas of JavaScript: conditional statements and operators (if, ternaries, &amp;&amp;, || etc.), the equals operator (==), and the strict equals operator (===). Lets see what happens in each case…</p> <p><strong>Conditionals</strong></p> <p>In JavaScript, all conditional statements and operators follow the same coercion paradigm. We’ll use the <code>if</code> statement by way of example.</p> <p>The construct <code>if</code> ( <em>Expression</em> ) <em>Statement</em> will coerce the result of evaluating the <em>Expression</em> to a boolean using the abstract method <strong>ToBoolean</strong> for which the <a href="http://ecma262-5.com/ELS5_HTML.htm" target="_blank" rel="noopener noreferrer">ES5 spec<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> defines the following algorithm:</p> <table><thead><tr><th>Argument Type</th> <th>Result</th></tr></thead> <tbody><tr><td>Undefined</td> <td><strong>false</strong></td></tr> <tr><td>Null</td> <td><strong>false</strong></td></tr> <tr><td>Boolean</td> <td>The result equals the input argument (no conversion).</td></tr> <tr><td>Number</td> <td>The result is <strong>false</strong> if the argument is <strong>+0</strong>, <strong>−0</strong>, or <strong>NaN</strong>; otherwise the result is <strong>true</strong>.</td></tr> <tr><td>String</td> <td>The result is <strong>false</strong> if the argument is the empty String (its length is zero); otherwise the result is <strong>true</strong>.</td></tr> <tr><td>Object</td> <td><strong>true</strong>.</td></tr></tbody></table> <p>This is the formula JavaScript uses to classify values as <em>truthy</em> (<code>true</code>, <code>&quot;potato&quot;</code>, <code>36</code>, <code>[1,2,4]</code> and <code>{a:16}</code>) or <em>falsey</em> (<code>false</code>, <code>0</code>, <code>&quot;&quot;</code>, <code>null</code> and <code>undefined</code>).</p> <p>Now we can see why, in the introductory example, <code>if ([0])</code> allows entry to the subsequent block: an array is an object and all objects coerce to <code>true</code>.</p> <p>Here’s a few more examples. Some results may be surprising but they always adhere to the simple rules specified above:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> <span class="token function-variable function">trutheyTester</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">expr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> expr <span class="token operator">?</span> <span class="token string">'truthey'</span> <span class="token operator">:</span> <span class="token string">'falsey'</span>
<span class="token punctuation">}</span>
<span class="token function">trutheyTester</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment">//truthey (an object is always true)</span>
<span class="token function">trutheyTester</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token comment">//falsey</span>
<span class="token function">trutheyTester</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Boolean</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">//truthey (an object!)</span>
<span class="token function">trutheyTester</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span> <span class="token comment">//falsey</span>
<span class="token function">trutheyTester</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">//truthey (an object!)</span>
<span class="token function">trutheyTester</span><span class="token punctuation">(</span><span class="token number">NaN</span><span class="token punctuation">)</span> <span class="token comment">//falsey</span>
<span class="token function">trutheyTester</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Number</span><span class="token punctuation">(</span><span class="token number">NaN</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">//truthey (an object!)</span>
</code></pre></div><p><strong>The Equals Operator (==)</strong></p> <p>The == version of equality is quite liberal. Values may be considered equal even if they are different types, since the operator will force coercion of one or both operators into a single type (usually a number) before performing a comparison. Many developers find this a little scary, no doubt egged on by at least one well-known JavaScript guru who recommends avoiding the == operator altogether.</p> <p>The avoidance strategy bothers me because you can’t master a language until you know it inside out – and fear and evasion are the enemies of knowledge. Moreover pretending == does not exist will not let you off the hook when it comes to understanding coercion because in JavaScript coercion is everywhere! Its in conditional expressions (as we’ve just seen), its in array indexing, its in concatenation and more. What’s more coercion, when used safely, can be an instrument of concise, elegant and readable code.</p> <p>Anyway, rant over, lets take a look at the way ECMA defines how == works. Its really not so intimidating. Just remember that <code>undefined</code> and <code>null</code> equal each other (and nothing else) and most other types get coerced to a number to facilitate comparison:</p> <table><thead><tr><th>Type(x)</th> <th>Type(y)</th> <th>Result</th></tr></thead> <tbody><tr><td>x and y are the same type</td> <td><strong>See Strict Equality (===) Algorithm</strong></td> <td></td></tr> <tr><td>null</td> <td>Undefined</td> <td><strong>true</strong></td></tr> <tr><td>Undefined</td> <td>null</td> <td><strong>true</strong></td></tr> <tr><td>Number</td> <td>String</td> <td>x == toNumber(y)</td></tr> <tr><td>String</td> <td>Number</td> <td>toNumber(x) == y</td></tr> <tr><td>Boolean</td> <td>(any)</td> <td>toNumber(x) == y</td></tr> <tr><td>(any)</td> <td>Boolean</td> <td>x == toNumber(y)</td></tr> <tr><td>String or Number</td> <td>Object</td> <td>x == toPrimitive(y)</td></tr> <tr><td>Object</td> <td>String or Number</td> <td>toPrimitive(x) == y</td></tr> <tr><td>otherwise…</td> <td><strong>false</strong></td> <td></td></tr></tbody></table> <p>Where the result is an expression the algorithm is reapplied until the result is a boolean. toNumber and toPrimitive are internal methods which convert their arguments according to the following rules:</p> <table><thead><tr><th>Argument Type</th> <th>Result</th></tr></thead> <tbody><tr><td>Undefined</td> <td><strong>NaN</strong></td></tr> <tr><td>Null</td> <td><strong>+0</strong></td></tr> <tr><td>Boolean</td> <td>The result is <strong>1</strong> if the argument is <strong>true</strong>. The result is <strong>+0</strong> if the argument is false.</td></tr> <tr><td>Number</td> <td>The result equals the input argument (no conversion).</td></tr> <tr><td>String</td> <td>In effect evaluates Number(<em>string</em>) “abc” -&gt; NaN “123” -&gt; 123</td></tr> <tr><td>Object</td> <td>Apply the following steps:1. Let <em>primValue</em> be ToPrimitive(<em>input argument</em>, hint Number). 2. Return ToNumber(<em>primValue</em>).</td></tr></tbody></table> <table><thead><tr><th>Argument Type</th> <th>Result</th></tr></thead> <tbody><tr><td>Object</td> <td>(in the case of equality operator coercion) if <code>valueOf</code> returns a primitive, return it. Otherwise if <code>toString</code> returns a primitive return it. Otherwise throw an error</td></tr> <tr><td>otherwise…</td> <td>The result equals the input argument (no conversion).</td></tr></tbody></table> <p>Here are some examples – I’ll use pseudo code to demonstrate step-by-step how the coercion algorithm is applied:</p> <p><strong>[0] == true;</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//EQUALITY CHECK...</span>
<span class="token punctuation">;</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token boolean">true</span>

<span class="token comment">//HOW IT WORKS...</span>
<span class="token comment">//convert boolean using toNumber</span>
<span class="token punctuation">;</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">1</span>
<span class="token comment">//convert object using toPrimitive</span>
<span class="token comment">//[0].valueOf() is not a primitive so use...</span>
<span class="token comment">//[0].toString() -&gt; &quot;0&quot;</span>
<span class="token string">'0'</span> <span class="token operator">==</span> <span class="token number">1</span>
<span class="token comment">//convert string using toNumber</span>
<span class="token number">0</span> <span class="token operator">==</span> <span class="token number">1</span> <span class="token comment">//false!</span>
</code></pre></div><p><strong>“potato” == true;</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//EQUALITY CHECK...</span>
<span class="token string">'potato'</span> <span class="token operator">==</span> <span class="token boolean">true</span>

<span class="token comment">//HOW IT WORKS...</span>
<span class="token comment">//convert boolean using toNumber</span>
<span class="token string">'potato'</span> <span class="token operator">==</span> <span class="token number">1</span>
<span class="token comment">//convert string using toNumber</span>
<span class="token number">NaN</span> <span class="token operator">==</span> <span class="token number">1</span> <span class="token comment">//false!</span>
</code></pre></div><p><strong>“potato” == false;</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//EQUALITY CHECK...</span>
<span class="token string">'potato'</span> <span class="token operator">==</span> <span class="token boolean">false</span>

<span class="token comment">//HOW IT WORKS...</span>
<span class="token comment">//convert boolean using toNumber</span>
<span class="token string">'potato'</span> <span class="token operator">==</span> <span class="token number">0</span>
<span class="token comment">//convert string using toNumber</span>
<span class="token number">NaN</span> <span class="token operator">==</span> <span class="token number">0</span> <span class="token comment">//false!</span>
</code></pre></div><p><strong>object with valueOf</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//EQUALITY CHECK...</span>
crazyNumeric <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Number</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
crazyNumeric<span class="token punctuation">.</span><span class="token function-variable function">toString</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token string">'2'</span>
<span class="token punctuation">}</span>
crazyNumeric <span class="token operator">==</span> <span class="token number">1</span>

<span class="token comment">//HOW IT WORKS...</span>
<span class="token comment">//convert object using toPrimitive</span>
<span class="token comment">//valueOf returns a primitive so use it</span>
<span class="token number">1</span> <span class="token operator">==</span> <span class="token number">1</span> <span class="token comment">//true!</span>
</code></pre></div><h2 id="object-with-tostring"><a href="#object-with-tostring" class="header-anchor">#</a> object with toString</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//EQUALITY CHECK...</span>
<span class="token keyword">var</span> crazyObj <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">toString</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string">'2'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
crazyObj <span class="token operator">==</span> <span class="token number">1</span>

<span class="token comment">//HOW IT WORKS...</span>
<span class="token comment">//convert object using toPrimitive</span>
<span class="token comment">//valueOf returns an object so use toString</span>
<span class="token string">'2'</span> <span class="token operator">==</span> <span class="token number">1</span>
<span class="token comment">//convert string using toNumber</span>
<span class="token number">2</span> <span class="token operator">==</span> <span class="token number">1</span> <span class="token comment">//false!</span>
</code></pre></div><h2 id="the-strict-equals-operator"><a href="#the-strict-equals-operator" class="header-anchor">#</a> The Strict Equals Operator (===)</h2> <p>This one’s easy. If the operands are of different types the answer is always false. If they are of the same type an intuitive equality test is applied: object identifiers must reference the same object, strings must contain identical character sets, other primitives must share the same value. <code>NaN</code>, <code>null</code> and <code>undefined</code> will never === another type. <code>NaN</code> does not even === itself.</p> <table><thead><tr><th>Type(x)</th> <th>Values</th> <th>Result</th></tr></thead> <tbody><tr><td>Type(x) different from Type(y)</td> <td><strong>false</strong></td> <td></td></tr> <tr><td>Undefined or Null</td> <td><strong>true</strong></td> <td></td></tr> <tr><td>Number</td> <td>x same value as y (but not <code>NaN</code>)</td> <td><strong>true</strong></td></tr> <tr><td>String</td> <td>x and y are identical characters</td> <td><strong>true</strong></td></tr> <tr><td>Boolean</td> <td>x and y are both true or both false</td> <td><strong>true</strong></td></tr> <tr><td>Object</td> <td>x and y reference same object</td> <td><strong>true</strong></td></tr> <tr><td>otherwise…</td> <td><strong>false</strong></td> <td></td></tr></tbody></table> <h2 id="common-examples-of-equality-overkill"><a href="#common-examples-of-equality-overkill" class="header-anchor">#</a> Common Examples of Equality Overkill</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//unnecessary</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> myVar <span class="token operator">===</span> <span class="token string">'function'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//better</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> myVar <span class="token operator">==</span> <span class="token string">'function'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>..since <code>typeOf</code> returns a string, this operation will always compare two strings. Therefore == is 100% coercion-proof.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//unnecessary</span>
<span class="token keyword">var</span> missing <span class="token operator">=</span> myVar <span class="token operator">===</span> <span class="token keyword">undefined</span> <span class="token operator">||</span> myVar <span class="token operator">===</span> <span class="token keyword">null</span>

<span class="token comment">//better</span>
<span class="token keyword">var</span> missing <span class="token operator">=</span> myVar <span class="token operator">==</span> <span class="token keyword">null</span>
</code></pre></div><p>…null and undefined are == to themselves and each other.
Note: because of the (very minor) risk that the <code>undefined</code> variable might get redefined, equating to null is slightly safer.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//unnecessary</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>myArray<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">//..}</span>

<span class="token comment">//better</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>myArray<span class="token punctuation">.</span>length <span class="token operator">==</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">//..}</span>
</code></pre></div><p>…enough said 😉</p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">Wednesday, June 17, 2020 2:19 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/docs/frontend/common/javascript/string.html" class="prev">
        string
      </a></span> <!----></p></div> </main></div><div class="global-ui"><!----><!----></div></div>
    <script src="/docs/assets/js/app.e2bd7cff.js" defer></script><script src="/docs/assets/js/2.e252a344.js" defer></script><script src="/docs/assets/js/32.4466c93b.js" defer></script><script src="/docs/assets/js/3.cd7f7020.js" defer></script>
  </body>
</html>
